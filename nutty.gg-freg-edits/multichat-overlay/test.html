<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chat Test</title>
<style>
  :root {
    --border-radius: 0.5em;
    --bubble-color: #333333dd;
  }

  body {
    font-family: "Proxima Nova", sans-serif;
    font-weight: 700;
    background: #111;
    color: white;
    padding: 20px;
  }

  .chat-message {
    display: flex;
    flex-direction: row;
    gap: 0.8em;
    margin-bottom: 1em;
    align-items: flex-start;
  }

  .avatar {
    width: 2.2em;
    height: 2.2em;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.7);
  }

  .message-content {
    display: flex;
    flex-direction: column;
  }

  .user-info {
    display: flex;
    gap: 0.5em;
    align-items: center;
    margin-bottom: 0.2em;
  }

  .username {
    font-weight: 700;
  }

  .badge {
    font-size: 1em;
  }

  .subscriber-banner {
    background: orange;
    border-radius: 1em;
    padding: 0.2em 0.5em;
    font-size: 0.7em;
    font-weight: 700;
    color: white;
  }

  .bubble {
    background: var(--bubble-color);
    padding: 0.3em 0.9em 0.3em 0.7em;
    border-radius: var(--border-radius);
    display: inline-block;
    max-width: 80%;
    word-wrap: normal;
    overflow-wrap: anywhere;
  }
</style>
</head>
<body>

<ul id="messageList"></ul>

<script>
const twitchColors = {
  A:"#D2691E", B:"#4682B4", C:"#6B8E23", D:"#C71585", E:"#9370DB",
  F:"#DAA520", G:"#FF7F50", H:"#20B2AA", I:"#9ACD32", J:"#DB7093",
  K:"#7B68EE", L:"#5F9EA0", M:"#CD853F", N:"#C71585", O:"#32CD32",
  P:"#D2691E", Q:"#4682B4", R:"#6B8E23", S:"#C71585", T:"#9370DB",
  U:"#DAA520", V:"#FF7F50", W:"#20B2AA", X:"#9ACD32", Y:"#DB7093", Z:"#7B68EE",
  0:"#5F9EA0", 1:"#CD853F", 2:"#C71585", 3:"#32CD32", 4:"#D2691E",
  5:"#4682B4", 6:"#6B8E23", 7:"#C71585", 8:"#9370DB", 9:"#DAA520"
};

function addChatMessage(data) {
  const messageList = document.getElementById('messageList');

  // Create message container
  const li = document.createElement('li');
  li.classList.add('chat-message');

  // Avatar
  const avatar = document.createElement('img');
  avatar.classList.add('avatar');
  avatar.src = data.profilePictureUrl;
  li.appendChild(avatar);

  // Message content
  const content = document.createElement('div');
  content.classList.add('message-content');

  // User info row
  const userInfo = document.createElement('div');
  userInfo.classList.add('user-info');

  // Username with color
  const username = document.createElement('span');
  username.classList.add('username');
  username.innerText = data.nickname;
  const firstChar = data.nickname.charAt(0).toUpperCase();
  username.style.color = twitchColors[firstChar] || "#ffd000ff";
  userInfo.appendChild(username);

  // Moderator emoji
  if (data.isModerator) {
    const modBadge = document.createElement('span');
    modBadge.classList.add('badge');
    modBadge.innerText = "üõ°Ô∏è";
    userInfo.appendChild(modBadge);
  }

  // Subscriber banner
  if (data.isSubscriber) {
    const subBanner = document.createElement('span');
    subBanner.classList.add('subscriber-banner');
    subBanner.innerText = data.nickname.toUpperCase();
    userInfo.appendChild(subBanner);
  }

  content.appendChild(userInfo);

  // Chat bubble
  const bubble = document.createElement('div');
  bubble.classList.add('bubble');
  bubble.innerText = data.message;
  content.appendChild(bubble);

  li.appendChild(content);
  messageList.appendChild(li);
}

// Test message
addChatMessage({
  nickname: "Freg",
  profilePictureUrl: "https://i.imgur.com/8Km9tLL.png",
  message: "This is a really long chat message that should wrap nicely inside the bubble without breaking words in half.",
  isModerator: true,
  isSubscriber: true
});

</script>
</body>
</html>